import{l as c}from"./index-52406d3c.js";import"./_commonjsHelpers-87174ba5.js";const{addons:N,useChannel:P}=__STORYBOOK_MODULE_PREVIEW_API__,{FORCE_REMOUNT:p,STORY_ARGS_UPDATED:f,STORY_CHANGED:v}=__STORYBOOK_MODULE_CORE_EVENTS__;var w="storybook/msw-vite-addon",A="msw",i={SEND:`${w}/send`,UPDATE:`${w}/update`,UPDATE_RESPONSES:`${w}/update-responses`,RESET:`${w}/reset`},r=N.getChannel(),T=!0,R=!1,u=0,S=200,t={},D,h=(s,e,o)=>s[e]||o,m=s=>{if(!s||!t)return;let e=window.msw;s==null||s.forEach(o=>{let a=t[o.info.path];S=a.status,e.use(c.rest.get(o.info.path,(n,l,d)=>l(d.status(a.status),d.delay(u),d.json(a.data))))})},I=(s,e)=>{let o,a,n,l=window.msw;o=e.parameters,o&&(a=h(o,A,[]));let d=P({[i.UPDATE]:({key:_,value:E})=>{_==="delay"&&(clearTimeout(D),u=E,m(n),D=setTimeout(()=>{r.emit(p,{storyId:e.id})},300)),_==="status"&&(S=E,Object.keys(t).forEach(O=>{t[O].status=E}),m(n),r.emit(p,{storyId:e.id}));let y={delay:u,status:S,responses:t};d(i.SEND,y)},[i.UPDATE_RESPONSES]:({key:_,objectKey:E,objectValue:y})=>{if(_==="responses"){t[E].data=y;let O={delay:u,status:S,responses:t};m(n),d(i.SEND,O),r.emit(p,{storyId:e.id})}},[i.RESET]:()=>{delete window.msw.originalResponses,l.stop(),location.reload()}});return!a||!l?(d(i.SEND,{status:void 0,delay:void 0,responses:void 0}),s()):(T&&(n=a.handlers,t=a.originalResponses,m(n),d(i.SEND,{status:S,delay:u,responses:t}),r.on(f,()=>{e.viewMode!=="docs"&&(delete window.msw.originalResponses,location.reload())}),r.on(v,()=>{delete window.msw.originalResponses,l.stop(),R=!0,location.reload()}),T=!1,r.emit(p,{storyId:e.id})),R&&(R=!1,r.emit(p,{storyId:e.id})),s())},U={decorators:[I]},C=U;export{C as default};
//# sourceMappingURL=preview-373f788f.js.map
